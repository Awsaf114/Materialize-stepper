/*
Materializecss Stepper - By Kinark 2016
https://github.com/Kinark/Materialize-stepper
JS.min v1.2.2
*/
$.validator.setDefaults({errorClass:"invalid",validClass:"valid",errorPlacement:function(a,b){b.is(":radio")||b.is(":checkbox")?a.insertBefore($(b).parent()):a.insertAfter(b)},success:function(a){$(a).closest("li").find("label.invalid:not(:empty)").length||$(a).closest("li").removeClass("wrong")}}),$.fn.activateStep=function(){$(this).addClass("step").stop().slideDown(function(){$(this).css({height:"auto","margin-bottom":""})})},$.fn.deactivateStep=function(){$(this).removeClass("step").stop().slideUp(function(){$(this).css({height:"auto","margin-bottom":"10px"})})},$.fn.showError=function(a){name=this.attr("name"),form=this.closest("form");var b={};b[name]=a,form.validate().showErrors(b),this.closest("li").addClass("wrong")},$.fn.activateFeedback=function(){return active=this.find(".step.active").find(".step-content"),active.prepend('<div class="wait-feedback"> <div class="preloader-wrapper active"> <div class="spinner-layer spinner-blue"> <div class="circle-clipper left"> <div class="circle"></div></div><div class="gap-patch"> <div class="circle"></div></div><div class="circle-clipper right"> <div class="circle"></div></div></div><div class="spinner-layer spinner-red"> <div class="circle-clipper left"> <div class="circle"></div></div><div class="gap-patch"> <div class="circle"></div></div><div class="circle-clipper right"> <div class="circle"></div></div></div><div class="spinner-layer spinner-yellow"> <div class="circle-clipper left"> <div class="circle"></div></div><div class="gap-patch"> <div class="circle"></div></div><div class="circle-clipper right"> <div class="circle"></div></div></div><div class="spinner-layer spinner-green"> <div class="circle-clipper left"> <div class="circle"></div></div><div class="gap-patch"> <div class="circle"></div></div><div class="circle-clipper right"> <div class="circle"></div></div></div></div></div>')},$.fn.destroyFeedback=function(){return active=this.find(".step.active"),active.find(".step-content").find(".wait-feedback").remove()},$.fn.nextStep=function(a){return stepper=this,form=this.closest("form"),active=this.find(".step.active"),next=$(this.children()).index($(active))+2,feedback=$(active.find(".step-content").find(".step-actions").find(".next-step")).data("feedback"),form.valid()?feedback&&a?(stepper.activateFeedback(),window[feedback].call()):(active.removeClass("wrong").addClass("done"),this.openStep(next),this.trigger("nextstep")):active.removeClass("done").addClass("wrong")},$.fn.prevStep=function(){return active=this.find(".step.active"),prev=$(this.children()).index($(active)),active.removeClass("wrong"),this.openStep(prev),this.trigger("prevstep")},$.fn.openStep=function(a){step_num=a-1,a=this.find(".step:visible:eq("+step_num+")"),a.hasClass("active")||(active=this.find(".step.active"),active.find(".step-content").find(".wait-feedback").remove(),active.removeClass("active").find(".step-content").stop().slideUp(),a.removeClass("done").addClass("active").find(".step-content").slideDown(),this.trigger("stepchange").trigger("step"+(step_num+1)))},$.fn.activateStepper=function(){$(this).each(function(){var a=$(this);method=a.data("method"),action=a.data("action"),method=method?method:"GET",action=action?action:"?",a.wrap('<form action="'+action+'" method="'+method+'"></div>'),a.find("li.step.active .step-content").slideDown("normal"),a.on("click",".step:not(.active)",function(){object=$(a.children()).index($(this)),a.hasClass("linear")?(active=a.find(".step.active"),$(a.children()).index($(active))+1==object?a.nextStep(!0):$(a.children()).index($(active))-1==object&&a.prevStep()):a.openStep(object)}).on("click",".next-step",function(b){b.preventDefault(),a.nextStep(!0)}).on("click",".previous-step",function(b){b.preventDefault(),a.prevStep()})})};
